# Руководство по применению оптимизаций

## Быстрое применение всех оптимизаций

### 1. Автоматическое применение
```bash
python apply_optimizations.py
```

Этот скрипт автоматически:
- ✅ Создает файл .env из примера
- ✅ Заменяет шаблон на оптимизированную версию
- ✅ Добавляет индексы базы данных
- ✅ Обновляет импорты в app.py

### 2. Настройка паролей
Отредактируйте файл `.env` и установите реальные пароли:
```env
SECRET_KEY=ваш-секретный-ключ-здесь
ADMIN_PASSWORD=пароль-администратора
APP_PASSWORD=пароль-приложения
```

### 3. Перезапуск приложения
```bash
python app.py
```

## Ручное применение (если нужно)

### Замена шаблона
```bash
# Создать резервную копию
cp templates/index.html templates/index_backup.html

# Заменить на оптимизированную версию
cp templates/index_optimized.html templates/index.html
```

### Обновление импортов в app.py
Замените в файле app.py:
```python
# Было:
from utils import calculate_report_profit

# Стало:
from utils_optimized import calculate_report_profit
```

## Проверка результатов

### Проверка безопасности
- ✅ Хардкодированные пароли заменены на API аутентификацию
- ✅ Используются переменные окружения
- ✅ Убраны debug выводы

### Проверка производительности
- ✅ Добавлены индексы базы данных
- ✅ Включено кэширование
- ✅ Оптимизированы SQL запросы

## Откат изменений (если нужно)

Все оригинальные файлы сохранены с суффиксом `.backup_YYYYMMDD_HHMMSS`:
```bash
# Восстановить оригинальный шаблон
cp templates/index.html.backup_* templates/index.html

# Восстановить оригинальный app.py
cp app.py.backup_* app.py
```

## Дополнительная информация

Подробный отчет об оптимизации: `OPTIMIZATION_REPORT.md` 